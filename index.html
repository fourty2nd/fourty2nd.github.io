<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fourty's Details</title>

<style>
@font-face {
  font-family: 'Mestizo';
  src: url('./fonts/MestizoFont.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}

* { margin:0; padding:0; box-sizing:border-box; }
body {
  font-family:'Poppins',sans-serif;
  background:#121212;
  color:#ccc;
  overflow:hidden;
  position:relative;
}

/* WELCOME TERMINAL */
.welcome {
  position:fixed;
  top:0; left:0;
  width:100%; height:100%;
  background:black;
  font-family: monospace;
  color:#0f0;
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  z-index:100;
}
#terminal {
  width:80%;
  max-width:800px;
  height:400px;
  background:#000;
  border:1px solid #0f0;
  padding:15px;
  overflow:hidden;
  white-space:pre;
  font-size:0.9rem;
  line-height:1.3rem;
  text-align:left;
}

/* ACCESS GRANTED */
#accessGranted {
  position:fixed;
  top:50%; left:50%;
  transform:translate(-50%,-50%);
  color:#0f0;
  font-size:3rem;
  font-weight:bold;
  opacity:0;
  transition: opacity 0.3s ease;
  border:2px solid #0f0;
  padding:20px 40px;
  text-align:center;
  background:#000;   /* PURE BLACK */
  z-index:101;
}
</style>
</head>
<body>

<div class="welcome" id="welcome">
  <div id="terminal"></div>
</div>

<div id="accessGranted">ACCESS GRANTED</div>

<script>
const terminal = document.getElementById("terminal");
const welcome = document.getElementById("welcome");
const access = document.getElementById("accessGranted");

const lines = [
  "struct group_info init_groups = { .usage = ATOMIC_INIT(2) };",
  "struct group_info *groups_alloc(int gidsetsize){",
  "    struct group_info *group_info;",
  "    int nblocks;",
  "    int i;",
  "    nblocks = (gidsetsize + NGROUPS_PER_BLOCK - 1) / NGROUPS_PER_BLOCK;",
  "    nblocks = nblocks ? : 1;",
  "    group_info = kmalloc(sizeof(*group_info) + nblocks*sizeof(gid_t *), GFP_USER);",
  "    if (!group_info) return NULL;",
  "    group_info->ngroups = gidsetsize;",
  "    group_info->nblocks = nblocks;",
  "    atomic_set(&group_info->usage, 1);",
  "    if (gidsetsize <= NGROUPS_SMALL) group_info->blocks[0] = group_info->small_block;",
  "    else { for (i = 0; i < nblocks; i++) {",
  "        gid_t *b;",
  "        b = (void *)__get_free_page(GFP_USER);",
  "        if (!b) goto out_undo_partial_alloc;",
  "        group_info->blocks[i] = b;",
  "    } }",
  "    return group_info;",
  "out_undo_partial_alloc:",
  "    while (--i >= 0) {",
  "        free_page((unsigned long)group_info->blocks[i]);",
  "    }",
  "}"
];

let lineIndex = 0;
let charIndex = 0;

function typeLine(){
  if(lineIndex < lines.length){
    if(charIndex < lines[lineIndex].length){
      terminal.textContent += lines[lineIndex][charIndex];
      charIndex++;
      setTimeout(typeLine, 20); // typing speed
    } else {
      terminal.textContent += "\n";
      lineIndex++;
      charIndex=0;
      setTimeout(typeLine, 80); // delay between lines
    }
  } else {
    // after done typing
    setTimeout(()=>{
      welcome.style.opacity=0;
      setTimeout(()=>{welcome.style.display="none"; showAccess();},600);
    },600);
  }
}

function showAccess(){
  access.style.opacity=1;
  setTimeout(()=>{
    access.style.opacity=0;
    setTimeout(()=>{ access.style.display="none"; showMenu(); },600);
  },1200);
}

function showMenu(){
  document.querySelector(".sidebar").style.display="flex";
  document.querySelector(".sidebar").style.opacity=1;
  const title = document.getElementById("title");
  setTimeout(()=>{
    title.style.display="block";
    title.style.opacity=1;
  },800);
}

window.onload = typeLine;
</script>
</body>
</html>